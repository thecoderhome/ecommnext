(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{7607:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return s(5880)}])},3399:function(e,n,s){"use strict";s.d(n,{Z:function(){return m}});var i=s(5893),t=s(7294),r=s(2920);s(7134);var c=s(5746),l=s(9008),a=s.n(l),d=s(1664),o=s.n(d),h=s(2148),u=s(3299);function x(e){let{href:n,children:s,...t}=e;return(0,i.jsx)(o(),{href:n,legacyBehavior:!0,children:(0,i.jsx)("a",{...t,children:s})})}var j=s(1955);function m(e){let{title:n,children:s}=e,{status:l,data:d}=(0,u.useSession)(),{state:m,dispatch:f}=(0,t.useContext)(h.y),{cart:{cartItems:p}}=m,[v,g]=(0,t.useState)(0);(0,t.useEffect)(()=>{g(p.reduce((e,n)=>e+n.quantity,0))},[p]);let N=()=>{j.Z.remove("cart"),f("CART_RESET"),(0,u.signOut)({callbackUrl:"/login"})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:n?"".concat(n," - EVSHOP"):"EVSHOP"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(r.Ix,{position:"bottom-center",limit:1}),(0,i.jsxs)("div",{className:"flex min-h-screen flex-col justify-between",children:[(0,i.jsx)("header",{children:(0,i.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,i.jsx)(o(),{href:"/",legacyBehavior:!0,children:(0,i.jsx)("a",{className:"text-lg font-bold",children:"EVSHOP"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o(),{href:"/cart",legacyBehavior:!0,children:(0,i.jsxs)("a",{className:"p-2",children:["Cart",v>0&&(0,i.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:v})]})}),"loading"===l?"Loading":(null==d?void 0:d.user)?(0,i.jsxs)(c.v,{as:"div",className:"relative inline-block",children:[(0,i.jsx)(c.v.Button,{className:"text-blue-600",children:d.user.name}),(0,i.jsxs)(c.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white shadow-lg",children:[(0,i.jsx)(c.v.Item,{children:(0,i.jsx)(x,{className:"dropdown-link",href:"/profile",children:"Profile"})}),(0,i.jsx)(c.v.Item,{children:(0,i.jsx)(x,{className:"dropdown-link",href:"/order-history",children:"Order History"})}),(0,i.jsx)(c.v.Item,{children:(0,i.jsx)("a",{className:"dropdown-link",href:"#",onClick:N,children:"Logout"})})]})]}):(0,i.jsx)(o(),{href:"/login",legacyBehavior:!0,children:(0,i.jsx)("a",{className:"p-2",children:"Login"})})]})]})}),(0,i.jsx)("main",{className:"container m-auto mt-4 px-4",children:s}),(0,i.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:"Copyright \xa92023 EVSHOP"})]})]})}},5880:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSP:function(){return x},default:function(){return j}});var i=s(5893),t=s(1163),r=s(7294),c=s(3399),l=s(1664),a=s.n(l),d=s(5675),o=s.n(d),h=s(2148),u=s(8433),x=!0;function j(e){let{product:n}=e,s=(0,t.useRouter)(),{state:l,dispatch:d}=(0,r.useContext)(h.y);if(!n)return(0,i.jsx)(c.Z,{title:"Product Not Found",children:"Product Not Found"});let x=async()=>{let e=l.cart.cartItems.find(e=>e.slug===n.slug),i=e?e.quantity+1:1,{data:t}=await u.Z.get("/api/products/".concat(n._id));if(t.countInStock<i){alert("Sorry, Product is out of stock");return}d({type:"CART_ADD_ITEM",payload:{...n,quantity:i}}),s.push("/cart")};return(0,i.jsxs)(c.Z,{title:n.name,children:[(0,i.jsx)("div",{className:"py-2",children:(0,i.jsx)(a(),{href:"/",children:"Back to products"})}),(0,i.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-3",children:[(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)(o(),{src:n.image,alt:n.name,width:640,height:640})}),(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)("h1",{className:"text-lg",children:n.name})}),(0,i.jsxs)("li",{children:["Category: ",n.category]}),(0,i.jsxs)("li",{children:["Brand: ",n.brand]}),(0,i.jsxs)("li",{children:[n.rating," of ",n.numReviews]}),(0,i.jsxs)("li",{children:["Description: ",n.description]})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"card p-5",children:[(0,i.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,i.jsx)("div",{children:"price"}),(0,i.jsxs)("div",{children:["$",n.price]})]}),(0,i.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,i.jsx)("div",{children:"Status"}),(0,i.jsx)("div",{children:n.countInStock>0?"In Stock":"Unavailable"})]}),(0,i.jsx)("button",{className:"primary-button w-full",onClick:x,children:"Add to cart"})]})})]})]})}}},function(e){e.O(0,[329,433,675,774,888,179],function(){return e(e.s=7607)}),_N_E=e.O()}]);